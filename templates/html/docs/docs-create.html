{% extends './html/base.html' %}

{% load tz %}
{% load static %}

{% block content %}
    <div class="tw-h-full tw-w-full tw-flex-col tw-p-3">
        
        <div class="tw-mt-3 tw-p-4 !tw-leading-8 md:!tw-mx-[30%] tw-flex tw-flex-col md:tw-place-items-center" id=''>

            {% if not user.is_authenticated %}
                <div class="alert alert-warning">
                    You are not logged in.
                </div>
            {% endif %}

            <div class="tw-text-4xl tw-text-center tw-font-bold">
                Create documentation
            </div>
            
            <div class="alert alert-warning tw-m-2 tw-hidden" id="doc-create-alert">

            </div>

            <div class="tw-flex tw-flex-col tw-h-full tw-w-full tw-mt-[10%]" id="repo-container">
                <div class="tw-text-2xl tw-text-center tw-font-bold tw-m-3">
                    Select repository
                </div>
                {% comment %} <div class="tw-flex tw-gap-3 tw-w-full tw-justify-between">
                    <a class="tw-text-center tw-text-blue-400 tw-m-2 !tw-right-auto">Manage repositories</a>
                    <button type="button" id="reload-repo" 
                            class="btn bi bi-arrow-clockwise bold !tw-left-auto"></button>
                </div> {% endcomment %}

                <div class="tw-flex tw-flex-col tw-border-solid tw-p-3 tw-w-full tw-border 
                                tw-rounded-xl tw-min-h-[250px] tw-max-h-[450px] tw-overflow-y-auto 
                                tw-gap-4
                                tw-justify-between" id="repositories">
                   
                    {% for repo in repos %}
                        <div class="tw-flex tw-w-full tw-border-solid tw-p-2 tw-gap-2 tw-border-2 tw-rounded-xl
                                    tw-place-items-center">
                            {% comment %} <img src="{{repo.owner.avatar_url}}" class="tw-w-[35px] tw-h-[35px] tw-rounded-full" alt="" srcset=""> {% endcomment %}
                            <span class="tw-max-w-[80%] tw-text-sm md:tw-text-lg tw-text-left tw-overflow-hidden">{{repo.full_name}}</span>
                            <button class="btn btn-success !tw-ml-auto" name="import-repo" onclick="importRepository('{{repo.full_name}}')">import</button>
                        </div>
                    {% endfor %}
                </div>
            </div>

            {% comment %} <div class="tw-flex tw-gap-2 tw-w-full tw-mt-4">
                <input type="text" class="input tw-w-full" name="" placeholder="Some other repo? Owner name"
                         id="repo-input" maxlength="50">
                <input type="text" class="input tw-w-full" name="" placeholder="Some other repo? repo name"
                         id="repo-input" maxlength="50">
                <button class="btn btn-success !tw-ml-auto" name="import-repo" onclick="importRepository({{repo.full_name}})">import</button>
            </div> {% endcomment %}
            <form action="" id="create-project" class="tw-hidden tw-flex tw-flex-col tw-gap-2 tw-place-items-center" method="post" onsubmit="return false;">
                <div class="tw-flex tw-flex-col tw-h-full tw-w-full tw-mt-[10%]" id="docfile">
                    <div class="tw-text-2xl tw-text-center tw-font-bold tw-m-3">
                        Select Docs
                    </div>

                    <div class="tw-flex tw-flex-col tw-p-3 tw-w-full
                                tw-rounded-xl tw-max-h-[250px] tw-overflow-y-auto 
                                tw-gap-0
                                tw-justify-between" id="doc-files">
                    </div>
                </div>
                <hr>
                <div id="project-details" class="tw-mt-[5%] tw-w-full tw-flex tw-flex-col tw-gap-4">

                    <div class="tw-text-2xl tw-text-center tw-font-bold tw-m-3">
                        Project info
                    </div>

                    <input type="text" class="input tw-max-w-xs" name="version" maxlength="30" value="" required placeholder="version">                
                    <input type="text" class="input" name="name" maxlength="30" required value="" placeholder="project name" id="project-name">                
                    <textarea name="about" id="" required class="input tw-min-h-[200px] tw-max-h-[350px]" 
                                            placeholder="About the project" maxlength="400"></textarea>
                    
                    <div class="tw-flex tw-flex-col tw-gap-1">
                        <input type="text" class="input" oninput="checkProjectNameAvailabilty(this.value)" onchange="checkProjectNameAvailabilty(this.value)" required name="unique_name" maxlength="30" value="" placeholder="unique project name" 
                                id="unique-name">
                        <div class="tw-text-sm">This name is subject to availability. (Avoid using well-known project names to prevent potential conflicts with original authors.)</div>
                    </div>
                    <input type="text" class="input" name="tags" maxlength="30" value="" placeholder="project tags seperated by comma (max 3)" id="project-name">                


                    <div class="tw-text-2xl tw-font-semibold tw-text-center tw-mt-[5%]">
                        Select project type
                    </div>
                    <div class="tw-flex tw-flex-col tw-w-full tw-gap-1 tw-text-lg tw-place-items-start tw-mx-[30%] tw-text-left">
                        <div class="form-check">
                            <input class="form-check-input" required type="radio" name="doc_type" value="lng" id="pgm-lang" checked>
                            <label class="form-check-label" for="pgm-lang">
                                Programming Language
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" required type="radio" name="doc_type" value="tool" id="tool" >
                            <label class="form-check-label" for="tool">
                                Tool
                            </label>
                        </div>
                    </div>
                    
                    <div class="tw-text-2xl tw-font-semibold tw-text-center tw-mt-[5%]">
                        Project Logo
                    </div>
                    <div class="tw-flex tw-flex-col tw-w-full tw-gap-4 tw-text-lg tw-place-items-center">
                        <img src=" " class="tw-w-[100px] tw-h-[100px] tw-bg-black" id="project-logo">
                        <input type="text" name="project_logo" placeholder="project logo url (optional)" 
                                class="input tw-w-full tw-max-w-lg" onchange="changeProjectIcon()" 
                                maxlength="350"
                                id="project-logo-input">
                    </div>
                    
                    <div class="tw-text-2xl tw-font-semibold tw-text-center tw-mt-[5%]">
                        Social
                    </div>
                    <div class="tw-flex tw-flex-col tw-w-full tw-gap-1 tw-place-items-center">
                        
                        <div class="input-group mb-3">
                            <i class="input-group-text bi bi-stack-overflow"></i>
                            <input type="text" class="input" 
                                    name="stackoverflow"
                                    maxlength="30"
                                    placeholder="Stackoverflow question tag" >
                        </div>
                        <div class="input-group mb-3">
                            <i class="input-group-text bi bi-twitter"></i>
                            <input type="text" class="input" 
                                    name="twitter"
                                    maxlength="30"
                                    value=""
                                    placeholder="Username" >
                        </div>
                        <div class="input-group mb-3">
                            <i class="input-group-text bi bi-reddit"></i>
                            <input type="text" class="input"
                                    name="reddit"
                                    maxlength="30"
                                    value=""
                                    placeholder="Reddit community" >
                        </div>
                        <div class="input-group mb-3">
                            <i class="input-group-text bi bi-mastodon"></i>
                            <input type="text" class="input" 
                                    name="mastodon"
                                    maxlength="30"
                                    value=""
                                    placeholder="Mastodon community" >
                        </div>
                        <div class="input-group mb-3">
                            <i class="input-group-text bi bi-discord"></i>
                            <input type="text" class="input" 
                                    name="discord"
                                    maxlength="30"
                                    value=""
                                    placeholder="Discord server" >
                        </div>
                    </div>

                    <div class="tw-text-2xl tw-font-semibold tw-text-center tw-mt-[5%]">
                        Additional links
                    </div>
                    <div class="tw-flex tw-flex-col tw-w-full tw-gap-4 tw-place-items-center">
                        
                        <div class="tw-flex tw-flex-wrap tw-gap-2">
                            <input type="text" class="input" 
                                    name="link_name"
                                    value=""
                                    maxlength="30"
                                    placeholder="Link name" maxlength="30">
                            <input type="text" class="input" 
                                    name="link_url"
                                    value=""
                                    placeholder="Link (url)" maxlength="300">
                        </div>
                        <div class="tw-flex tw-flex-wrap tw-gap-2">
                            <input type="text" class="input" 
                                    name="link_name"
                                    value=""
                                    maxlength="30"
                                    placeholder="Link name" maxlength="30">
                            <input type="text" class="input" 
                                    name="link_url"
                                    value=""
                                    placeholder="Link (url)" maxlength="300">
                        </div>
                    
                    </div>

                    <div class="tw-text-2xl tw-font-semibold tw-text-center tw-mt-[5%]">
                        Sponsor your project
                    </div>
                    <div class="tw-flex tw-flex-col tw-w-full tw-gap-1 tw-place-items-center">
                        
                        <div class="input-group mb-3">
                            <i class="input-group-text bi bi-opencollective"></i>
                            <input type="text" class="input" 
                                    name="opencollective"
                                    value=""
                                    maxlength="30"
                                    placeholder="Open collective" >
                        </div>
                        <div class="input-group mb-3">
                            <i class="input-group-text bi bi-github"></i>
                            <input type="text" class="input" 
                                    name="github"
                                    value=""
                                    maxlength="30"
                                    placeholder="Githib sponsorship" >
                        </div>
                        
                        <div class="input-group mb-3">
                            <i class="input-group-text bi bi-currency-dollar"></i>
                            <input type="text" class="input" 
                                    name="patreon"
                                    value=""
                                    maxlength="30"
                                    placeholder="Patreon" >
                        </div>
                        <div class="input-group mb-3">
                            <i class="input-group-text bi bi-currency-dollar"></i>
                            <input type="text" class="input" 
                                    name="buymeacoffee"
                                    value=""
                                    maxlength="30"
                                    placeholder="Buymeacoffee" >
                        </div>
                    
                    </div>

                    
                </div>

                <button type="submit" class="btn btn-primary tw-min-w-[200px] tw-max-w-md">Save</button>
            </form>
        </div>
       
    </div>

    <script src="{% static "./js/docs/doc-create.js" %}"></script>

{% endblock content %}